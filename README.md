# REST API для базы данных товаров

Перед запуском убедитесь, что вы установили Node.js версии 16 или выше.

Для запуска сервера перейдите в папку с репозиторием и выполните команду `node index`. Для остановки нажмите сочетание клавиш CTRL+C.

После запуска сервера API будет доступен по пути `http://localhost:3000`.

## Методы API

Все методы API, требующие тела запроса, ожидают получить тело в виде JSON. Ответы всех методов также отдаются в виде JSON.

Доступные методы:
* `GET /api/goods `- получить список товаров, в query параметр search можно передать поисковый запрос
* `POST /api/goods` - создать товар, в теле запроса нужно передать объект {title: string, description: string, price: number, discount?: number, count: number, units: string, images?: [] }
* `GET /api/goods/{id}` - получить товар по его ID
* `PATCH /api/goods/{id}` - изменить товар с ID, в теле запроса нужно передать объект {title: string, description: string, price: number, discount?: number, c ount: number, units: string, images?: [] }
* `DELETE /api/goods/{id}` - удалить товар по ID
* `GET /api/goods/discount` - получить список дисконтных товаров
* `GET /api/goods/{category}` - получить список товаров по категории
* `GET /api/category` - получить список категорий {[]}

## Структура объекта товара

```javascript
{
  // ID товара, заполняется сервером автоматически, после создания нельзя изменить
  id: '1234567890',
  // * обязательное поле, наименование товара
  title: 'Манго',
  // * обязательное поле, описание товара
  description: 'Сочный, вкусный',
  // * обязательное поле, категория товара
  category: 'Фрукты',
  // * обязательное поле, цена товара
  price: 3000,
  // * обязательное поле, единицы измерения товара
  units: 'кг',
  // * обязательное поле, количество товара
  count: 30,
  // необязательное поле, скидка в процентах
  discount: 10,
  // изображения - необязательное поле, строка (отправлять изображение необходимо в формате base64)
  image: 'image/id.jpg'
}
```

## Возможные статусы ответов

Ответ сервера может содержать один из статусов ответа:
* `200` - запрос обработан нормально
* `201` - запрос на создание нового элемента успешно обработан, а заголовок ответа Location содержит ссылку на GET метод получения созданного элемента
* `404` - переданный в запросе метод не существует или запрашиваемый элемент не найден в базе данных
* `422` - объект, переданный в теле запроса, не прошёл валидацию. Тело ответа содержит массив с описаниями ошибок валидации:
  ```javascript
  [
    {
      field: 'Название поля объекта, в котором произошла ошибка',
      message: 'Сообщение об ошибке, которое можно показать пользователю'
    }
  ]
  ```
* `500` - странно, но сервер сломался :(<br>Обратитесь к куратору, чтобы решить проблему
